<Window x:Class="EasySave.GUI.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Paramètres - EasySave" 
        Height="560" Width="520"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    <Window.Resources>
        <Style TargetType="Label">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,10,0,3"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Height" Value="32"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Height" Value="32"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>
    <Grid Margin="20,15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
                <Label Content="Format des logs:"/>
                <ComboBox ItemsSource="{Binding LogFormatValues}" SelectedItem="{Binding LogFormat}" Margin="0,0,0,8"/>

                <Label Content="Destination des logs:"/>
                <ComboBox ItemsSource="{Binding LogDestinationValues}" 
                          SelectedItem="{Binding LogDestination}" 
                          Margin="0,0,0,8"/>

                <Label Content="URL serveur logs (Docker):"/>
                <TextBox Text="{Binding LogServerUrl, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Content="Extensions prioritaires (choisir puis Ajouter):"/>
                <Grid Margin="0,0,0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <ComboBox Grid.Column="0" ItemsSource="{Binding AvailableExtensions}"
                              SelectedItem="{Binding SelectedPriorityExtension}"
                              Margin="0,0,8,0"/>
                    <Button Grid.Column="1" Content="Ajouter" Command="{Binding AddPriorityExtensionCommand}" Background="#0078D4" Foreground="White"/>
                </Grid>
                <ListBox ItemsSource="{Binding PriorityExtensionsList}" 
                         SelectedItem="{Binding SelectedPriorityToRemove}"
                         Height="70" Margin="0,0,0,4"/>
                <Button Content="Retirer la sélection" Command="{Binding RemovePriorityExtensionCommand}" Margin="0,0,0,12"/>

                <Label Content="Extensions à chiffrer (choisir puis Ajouter):"/>
                <Grid Margin="0,0,0,4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <ComboBox Grid.Column="0" ItemsSource="{Binding AvailableExtensions}"
                              SelectedItem="{Binding SelectedEncryptExtension}"
                              Margin="0,0,8,0"/>
                    <Button Grid.Column="1" Content="Ajouter" Command="{Binding AddEncryptExtensionCommand}" Background="#0078D4" Foreground="White"/>
                </Grid>
                <ListBox ItemsSource="{Binding ExtensionsToEncryptList}" 
                         SelectedItem="{Binding SelectedEncryptToRemove}"
                         Height="70" Margin="0,0,0,4"/>
                <Button Content="Retirer la sélection" Command="{Binding RemoveEncryptExtensionCommand}" Margin="0,0,0,12"/>

                <Label Content="Seuil fichier gros (Ko):"/>
                <TextBox Text="{Binding LargeFileThresholdKoText, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,8"/>

                <Label Content="Ne pas lancer de sauvegarde si cette application est ouverte (optionnel)"/>
                <TextBox Text="{Binding BusinessSoftwareName, UpdateSourceTrigger=PropertyChanged}" 
                         Margin="0,0,0,4"
                         ToolTip="Indiquez le nom de l'application (ex: Excel, notepad), sans .exe. Tant qu'elle est ouverte, aucune sauvegarde ne démarrera. Laisser vide pour désactiver."/>
                <TextBlock Text="Ex. : Excel, notepad — laisser vide pour désactiver."
                           FontSize="11" Foreground="#666666" Margin="0,0,0,15" TextWrapping="Wrap"/>
            </StackPanel>
        </ScrollViewer>

        <Border Grid.Row="1" Background="#F5F5F5" Padding="10,12" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Appliquer" Command="{Binding ApplyCommand}" Background="#0078D4" Foreground="White" ToolTip="Enregistrer les paramètres (fenêtre reste ouverte)"/>
                <Button Content="Enregistrer" Command="{Binding SaveCommand}" Background="#107C10" Foreground="White" ToolTip="Enregistrer et fermer"/>
                <Button Content="Annuler" Command="{Binding CancelCommand}" Background="#6c757d" Foreground="White" ToolTip="Fermer sans enregistrer"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
